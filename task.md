# Техническая задача от заказчика: Календарь мероприятий для спорта высших достижений

### Описание
Цель проекта — разработать интерактивную платформу для отображения календаря спортивных мероприятий, с возможностью фильтрации событий по ключевым параметрам. Это должно способствовать лучшему доступу спортсменов, тренеров и организаторов к актуальной информации о соревнованиях, конкурсах и иных спортивных мероприятиях.

## Основные функции платформы

### Фильтрация по параметрам:
- Вид спорта (например, баскетбол, плавание и т.д.)
- Дисциплина
- Программа
- Место проведения
- Количество участников
- Пол, возрастная группа
- Сроки проведения
- Тип соревнования – (межрегиональные, окружные, кубок, чемпионат, и т.д.)

### Форматы отображения:
- Ближайшие мероприятия
- Мероприятия текущей недели
- Мероприятия следующего месяца
- Мероприятия квартала
- Мероприятия полугодия
- Другое, на усмотрение участников

### Дополнительные возможности:
- Извещения о новых мероприятиях
- Что делать если есть перенос мероприятия или его изменения? Например, в одной pdf он был, а в следующем уже его нет?
- Персонализированные уведомления и напоминания

## Решение

### Сбор данных:
- Разработка парсеров для автоматического сбора информации с официального сайта Минспорта
- Унификация данных для создания централизованной базы

### Сценарии использования продукта (название, шаги воспроизведения):
- Вывод информации по спорту
- Подборка соревнований по дисциплине/дисциплинам
- Отображение соревнований на 1/3/6 месяцев
- Рассылка уведомлений (браузер/сервис)
- Сохранение фильтров
- Уведомление о соревновании (кастомизированное)

### Дополнительные киллерфичи:
Вы можете добавлять свои сценарии использования, за это будут дополнительные баллы! (если они будут реализованы).

## Проблематика
В настоящее время существует проблема с отслеживанием мероприятий и соревнований в сфере спорта. Хотя соревнования, затрагивающие разные виды спорта, включаются в Единый календарный план через Министерство спорта, этот план публикуется в формате PDF и охватывает все виды спорта без исключения. В результате, спортсменам, интересующимся только своим видом спорта, непросто и неудобно просматривать и анализировать данный документ.

Спортсмены сталкиваются с затруднением при использовании Единого календарного плана мероприятий и соревнований, представленного в формате PDF, из-за обилия несистематизированной информации без учета индивидуальных нужд. Этот формат не позволяет эффективно фильтровать данные, что ведет к временным затратам на поиск релевантных соревнований, усложняет планирование подготовки и увеличивает стрессовую нагрузку. В результате спортсмены могут пропускать значимые события или перепланировать свою активность из-за недостаточной персонализации доступной информации.

Поэтому, на данный момент отсутствует единый календарь соревнований и мероприятий, который представлял бы информацию по разнообразным видам спорта в удобной для спортсменов форме и был бы согласован с данными Единого календарного плана.

## Образ результата
- Создана база данных, содержащая информацию о текущих и запланированных мероприятиях, входящих в Единый календарный план по спорту (2 часть).
- Разработан календарь, в котором отображены все мероприятия и соревнования по указанным в ЕКП видам спорта.
- Реализованы различные сценарии работы сервиса/приложения.

# Решение нашей команды по выбору технологий:
Архитектура:
- в первую очередь нужна микросервисность
- мониторнг (grafana, prometheus)
- docker-compose/kubernets ready
- ddd, solid, следование паттернам программирования
Database: postgresql (есть готовые масштабируемые DBaaS). Каждый сервис использует свою бд.
Message broker: kafka
Backend: flask, django, grpc, protobuf (сборка api библиотек для flask и react), codegen openapi документации
Frontend: telegram bot, nextjs, react, charka-ui, i18n, generated api from protobuf, zod, store: deep-foundation/store (states in query/localstorage), react-json-schema для генерации всех форм, Presentational and Container Components (Пример: MyComponent/[MyComponent.tsx, MyComponentUi.tsx, data.ts], где в data.ts прописаны или генерируются тестовые данные для компонента), virtual scroll, memoization
Авторизация: универсальный провайдер для подключения разных способов авторизации
- точно нужна авторизация через telegram
- второй по приоритету - gosuslugi.ru
- третий - vk.com
Уведомления: универсальный провайдер для подключения разных способо уведомения
- telegram bot
- email

### Самые важные задачи, которые делаем в первую очередь (mvp):
- Вывод информации по спорту
- Подборка соревнований по дисциплине/дисциплинам
- Отображение соревнований на 1/3/6 месяцев
- Рассылка уведомлений (браузер/сервис)
- Сохранение фильтров
  - История поиска с учетом фильтров
  - Возможность сохранить фильтры и получать по ним уведомления, как на aviasales/avito
- Уведомление о соревновании (кастомизированное)

### Дополнительный функционал (делается после mvp)
- подброная документация по проекту, по сервисам и по модулям, openapi, drawio.svg в readme.md со схемой проекта и реалиционных моделей
- хорошее покрытие проекта тестами
- диаграмма ганта - календарь для мероприятий как это реализовано здесь https://itch.io/jams
- openstreetmap карта, чтобы найти мероприятие на карте мира
- рекомендательная система
- сделать возможность редактировать список мероприятий (формы на базе react json schema + crud)
- i18n локализация
- тестирование

## Первичное тз для сервисов:

#### Сервис парсинга pdf документа:
- сервис по api может принять pdf документ (там только текстовые данные в табличном виде)
- далее анализиует и приводит к json формату
- сервис по api обращается к сервису, где мы храним данные в нашем формате по ORM модели и получает список мероприятий
- делается diff мероприятий, которые пришли из pdf документа, и тех, что уже есть в бд
  - добавляем новые мероприятия
  - меняем описание старых мероприятий
  - если мероприятие пропало, то меняем поле archive или disable на true (не стоит ничего удалять из бд)
- отправляем diff в сервис, где мы храним данные в нашем формате по ORM модели и получает список мероприятий
- получаем статус получения сервисом или брокером очередей
- возвращаем статус обработки pdf



Нужно, чтобы сущности, которые могут иметь изображения, аватары, баннеры для лендинга, ссылки, описание их имели
Например, для ивента это точно актуально.



Также в таблице Events должно быть:

IdEKP: Number (какой-то внутренний id, откуда мы возьмем данные) - ЕКП

Наименование спортивного мероприятия
(пол, возрастная группа)
(дисциплина, программа)

Сроки
проведения

МестА проведения - массив
(страна, субъект страны, город)
(спортивная база, центр)

Количество участников


- нужно создать сущности если их нету как в фронтенде, так и бекенде

# сегодня
- добить фронтенд
  - eventList компонент: если ты имеешь роль manager или админ, то должы появиться кноки для удаления, редактирования и добавления events (формы для добавления и редактирования должы генерироваться react-json-scheme)
    - добавь наверху кнопку, которая переключат роль: user/manager
    - user не может удалять, редактировать и создавать

- сделать в event list переключение на карты openstreetmap (отметить мероприятия на карте)

- dashboard для мендежеров? (посмотри что можно там разместить, исходя из тз: task.md)

- понять итоговую схему для бекенда
- собрать протобафы, сборка апи, опенапи
- вынести тестовые данные на сервер

# завтра
- пройтись по всем сценариям
- лендинг-презентация
